<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="description" content="openEHR Task Planning Visual Modelling Language">
<meta name="keywords" content="task planning, visual language, workflow, care pathway, guideline, order set">
<title>Task Planning Visual Modelling Language (TP-VML)</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_task_planning_visual_modelling_language_tp_vml">Task Planning Visual Modelling Language (TP-VML)</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_support">Support</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_feedback">1.4. Feedback</a></li>
<li><a href="#_conformance">1.5. Conformance</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_draw_io_tool_mode">2.1. Draw.io Tool mode</a></li>
</ul>
</li>
<li><a href="#_elements">3. Elements</a>
<ul class="sectlevel2">
<li><a href="#_composites">3.1. Composites</a>
<ul class="sectlevel3">
<li><a href="#_plans">3.1.1. Plans</a></li>
<li><a href="#_task_groups">3.1.2. Task Groups</a></li>
<li><a href="#_conditional_structures">3.1.3. Conditional Structures</a></li>
</ul>
</li>
<li><a href="#_primitives">3.2. Primitives</a>
<ul class="sectlevel3">
<li><a href="#_tasks">3.2.1. Tasks</a></li>
<li><a href="#_task_repeats">3.2.2. Task Repeats</a></li>
<li><a href="#_events">3.2.3. Events</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_patterns">4. Patterns</a>
<ul class="sectlevel2">
<li><a href="#_synchronisation_of_parallel_paths">4.1. Synchronisation of Parallel Paths</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://specifications.openehr.org/images/openEHR_logo_RGB.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_task_planning_visual_modelling_language_tp_vml" class="sect0"><a class="anchor" href="#_task_planning_visual_modelling_language_tp_vml"></a>Task Planning Visual Modelling Language (TP-VML)</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="https://www.openehr.org/programs/specification" target="_blank" rel="noopener">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: PROC latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: task planning, visual language, workflow, care pathway, guideline, order set</p></td>
</tr>
</tbody>
</table>
<div class="imageblock text-center">
<div class="content">
<object type="image/svg+xml" data="openehr_block_diagram.svg" width="60%"><span class="alt">openEHR components</span></object>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2017 - 2021 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="https://www.openehr.org" target="_blank" rel="noopener">The openEHR Foundation</a> is an independent, non-profit foundation, facilitating the sharing of health records by consumers and clinicians via open specifications, clinical models and open platform implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.openehr.org/components/PROC/open_issues" target="_blank" rel="noopener">Problem Reports</a><br>
 Web: <a href="https://specifications.openehr.org" target="_blank" rel="noopener">specifications.openEHR.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>PROC Release 1.6.0 (unreleased)</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.6.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add Task Repeat.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>15 Nov 2020</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add parallel synchronisation example.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N Iglesias,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 Oct 2020</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add concurrent end blocks and T/F Gates.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03 Jun 2020</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>PROC Release 1.0.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update to modelling shapes used in main specification.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Mar 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECPROC-2" target="_blank" rel="noopener">SPECPROC-2</a> Initial Writing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Oct 2017</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author"><a class="anchor" href="#_primary_author"></a>Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ars Semantica (UK); openEHR Foundation Management Board.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="#_contributors"></a>Contributors</h3>
<div class="paragraph">
<p>This specification benefited from formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Borut Fabjan, Program Manager, Marand, Slovenia</p>
</li>
<li>
<p>Matija Kejžar, Marand, Slovenia</p>
</li>
<li>
<p>Eugeny Leonov, Solit Clouds, Moscow, Russia</p>
</li>
<li>
<p>Bjørn Næss, DIPS, Norway</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_support"><a class="anchor" href="#_support"></a>Support</h3>
<div class="paragraph">
<p>The work reported in this specification has been funded by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>City of Moscow, Russia</p>
</li>
<li>
<p>DIPS, Norway</p>
</li>
<li>
<p>Marand d.o.o., Slovenia</p>
</li>
<li>
<p>Ars Semantica, UK</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks"><a class="anchor" href="#_trademarks"></a>Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a trademark of the openEHR Foundation.</p>
</li>
<li>
<p>'OMG' is a trademark of the Object Management Group.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document describes a visual modelling language for the openEHR Task Planning Model, known as TP-VML. This is designed to enable visually efficient visual representations of Task Plans to be authored with appropriately configured tools.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Task Plan and workflow authors;</p>
</li>
<li>
<p>Tool vendors.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/releases/PROC/latest/task_planning.html" target="_blank" rel="noopener">openEHR Task Planning Model</a>;</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the TRIAL state. The development version of this document can be found at <a href="https://specifications.openehr.org/releases/PROC/latest/tp_vml.html" target="_blank" rel="noopener">https://specifications.openehr.org/releases/PROC/latest/tp_vml.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.openehr.org/c/specifications/task-planning-gdl" target="_blank" rel="noopener">process specifications forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.openehr.org/components/PROC/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.openehr.org/components/PROC/history" target="_blank" rel="noopener">PROC component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.5. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR Reference Model specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal, automated derivations from the Reference Model, ITS conformance indicates RM conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_draw_io_tool_mode"><a class="anchor" href="#_draw_io_tool_mode"></a>2.1. Draw.io Tool mode</h3>
<div class="paragraph">
<p>The following files can be downloaded and then imported into draw.io as libraries to provide a working palette for TP-VML diagrams.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="tp_vml/draw.io-lib/TP_VML_plans.xml">TP_VML plans</a></p>
</li>
<li>
<p><a href="tp_vml/draw.io-lib/TP_VML_groups.xml">TP_VML groups</a></p>
</li>
<li>
<p><a href="tp_vml/draw.io-lib/TP_VML_tasks.xml">TP_VML tasks</a></p>
</li>
<li>
<p><a href="tp_vml/draw.io-lib/TP_VML_events.xml">TP_VML events</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_elements"><a class="anchor" href="#_elements"></a>3. Elements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The elements of TP-VML are based directly on the openEHR Task Planning formal specification, and can be used to construct exectuable Plans.</p>
</div>
<div class="sect2">
<h3 id="_composites"><a class="anchor" href="#_composites"></a>3.1. Composites</h3>
<div class="paragraph">
<p>The TP-VML elements in this section are composite structures that contain primitive elements.</p>
</div>
<div class="sect3">
<h4 id="_plans"><a class="anchor" href="#_plans"></a>3.1.1. Plans</h4>
<div class="paragraph">
<p>TP-VML icons for <code>WORK_PLAN</code> and <code>TASK_PLAN</code> are used (<a href="https://specifications.openehr.org/releases/PROC/latest/task_planning.html#_plan_structure" target="_blank" rel="noopener">TP plan structure</a>), enabling some of the relevant meta-data to be visualised.</p>
</div>
<div id="tp_vml_plans" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-plans.svg" alt="TP VML plans">
</div>
<div class="title">Figure 1. Plans</div>
</div>
</div>
<div class="sect3">
<h4 id="_task_groups"><a class="anchor" href="#_task_groups"></a>3.1.2. Task Groups</h4>
<div class="paragraph">
<p>Task Group icons and their conditional structure derivatives use two visual elements to indicate the extent of the (<a href="https://specifications.openehr.org/releases/PROC/latest/task_planning.html#_task_group_structure" target="_blank" rel="noopener">container structure</a>) they represent from the TP model.</p>
</div>
<div class="paragraph">
<p>Since Tasks and other Task Groups within any Task Group are included by ordered containment (i.e. 'list' semantics) rather than chaining, contained items are shown connected with dashed arrows, indicating the implied ordered.</p>
</div>
<div id="tp_vml_task_groups" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-task_groups.svg" alt="TP VML task groups">
</div>
<div class="title">Figure 2. Task groups</div>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_structures"><a class="anchor" href="#_conditional_structures"></a>3.1.3. Conditional Structures</h4>
<div class="paragraph">
<p><a href="https://specifications.openehr.org/releases/PROC/latest/tp_vml.html#_conditional_structures_2">TP conditional structures</a> follow the same structural logic as Task Groups, with the addition of various specific meta-data as per the specificaion.</p>
</div>
<div id="tp_vml_conditionals_condition" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-conditionals_condition.svg" alt="TP VML conditionals condition">
</div>
<div class="title">Figure 3. Conditional structures - CONDITION_GROUP</div>
</div>
<div id="tp_vml_conditionals_decision" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-conditionals_decision.svg" alt="TP VML conditionals decision">
</div>
<div class="title">Figure 4. Conditional structures - DECISION_GROUP</div>
</div>
<div id="tp_vml_conditionals_event" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-conditionals_event.svg" alt="TP VML conditionals event">
</div>
<div class="title">Figure 5. Conditional structures - EVENT_GROUP</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_primitives"><a class="anchor" href="#_primitives"></a>3.2. Primitives</h3>
<div class="paragraph">
<p>The TP-VML elements in this section are atomic primitives that are used within various levels of containment structure, including Task Groups, the various kinds of conditional structure, Task Plans and Work Plans.</p>
</div>
<div class="sect3">
<h4 id="_tasks"><a class="anchor" href="#_tasks"></a>3.2.1. Tasks</h4>
<div class="paragraph">
<p>TP-VML Tasks correspond to formal types of the form <code>TASK&lt;T&gt;</code> (<a href="https://specifications.openehr.org/releases/PROC/latest/task_planning.html#_definition_model" target="_blank" rel="noopener">TP main model</a>; <a href="https://specifications.openehr.org/releases/PROC/latest/task_planning.html#_task_actions" target="_blank" rel="noopener">TP Task Action types</a>), whose concrete forms are: <code>PERFORMABLE_TASK&lt;DEFINED_ACTION&gt;</code>, <code>PERFORMABLE_TASK&lt;SUB_PLAN&gt;</code>, <code>DISPATCHABLE_TASK&lt;HAND_OFF&gt;</code>, <code>DISPATCHABLE_TASK&lt;SYSTEM_REQUEST&gt;</code>, <code>DISPATCHABLE_TASK&lt;EXTERNAL_REQUEST&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Performable Tasks may have one or more associated <code><em>capture_datasets</em></code>. Dispatchable Tasks may have an associated callback wait state (<code>CALLBACK_WAIT</code>).</p>
</div>
<div id="tp_vml_tasks" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-tasks.svg" alt="TP VML tasks">
</div>
<div class="title">Figure 6. Tasks</div>
</div>
</div>
<div class="sect3">
<h4 id="_task_repeats"><a class="anchor" href="#_task_repeats"></a>3.2.2. Task Repeats</h4>
<div class="paragraph">
<p>A Task, or more usually a Task Group may have a repeat specification (<code>TASK_REPEAT</code>) associted with it (<a href="https://specifications.openehr.org/releases/PROC/latest/task_planning.html#_repetition" target="_blank" rel="noopener">TP Repetitions</a>). Various forms are possible. This is diagrammed as follows.</p>
</div>
<div id="tp_vml_task_repeat" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-task_repeat.svg" alt="TP VML task repeat">
</div>
<div class="title">Figure 7. Task (group) repeat</div>
</div>
</div>
<div class="sect3">
<h4 id="_events"><a class="anchor" href="#_events"></a>3.2.3. Events</h4>
<div class="paragraph">
<p>TP-VML Events are defined in the <a href="https://specifications.openehr.org/releases/PROC/latest/tp_vml.html#_events">Events section in the TP specification</a> and can be visually represented in three forms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>full form</em>: with icon and named attributes from the TP model;</p>
</li>
<li>
<p><em>short form</em>: with icon and implicit attributes from the TP model;</p>
</li>
<li>
<p><em>informal</em>: via an icon, with no further specification of details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Events are specified as triggers for the wait states <code>TASK_WAIT</code>, <code>TIMER_WAIT</code> and <code>CALLBACK_WAIT</code>.</p>
</div>
<div id="tp_vml_events" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/TP-VML-events.svg" alt="TP VML events">
</div>
<div class="title">Figure 8. Events</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_patterns"><a class="anchor" href="#_patterns"></a>4. Patterns</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_synchronisation_of_parallel_paths"><a class="anchor" href="#_synchronisation_of_parallel_paths"></a>4.1. Synchronisation of Parallel Paths</h3>
<div class="paragraph">
<p>The following example shows two parallel activity paths, where the completion of one (lab results arriving) causes the termination of the other (medication).</p>
</div>
<div id="parallel_sync" class="imageblock text-center text-center">
<div class="content">
<img src="tp_vml/diagrams/EX-parallel_sync.svg" alt="EX parallel sync">
</div>
<div class="title">Figure 9. Parallel synchronisation</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-10-30 13:35:47 UTC
</div>
</div>
</body>
</html>